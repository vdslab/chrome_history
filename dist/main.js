(()=>{const e=(new Date).getTime()-6048e5;let t=document.getElementById("historyDiv");const o=["#4688F1","#E8453C","#F9BB2D","#3AA757"];let n=document.getElementById.bind(document);function l(e){let l=n("historyTemplate");for(let n of e){let e=l.content.querySelector("#history, div"),c=o[Math.floor(Math.random()*o.length)];e.style.backgroundColor=c;let i=l.content.querySelector(".titleLink, a"),u=l.content.querySelector(".pageName, p");l.content.querySelector(".removeButton, button"),l.content.querySelector(".removeCheck, input").setAttribute("value",n.url);let h=document.createElement("img"),s=new URL(n.url).host;i.href=n.url,h.src="chrome://favicon/"+n.url,i.textContent=s,i.appendChild(h),u.innerText=n.title,""===n.title&&(u.innerText=s);var r=document.importNode(l.content,!0);r.querySelector(".removeButton, button").addEventListener("click",(function(){chrome.history.deleteUrl({url:n.url},(function(){location.reload()}))})),t.appendChild(r)}}const r=[];let c=[];c.push([]),c[r.length].push(0),c[r.length].push(1),console.log(c),console.log(c.length),chrome.history.onVisited.addListener((function(e){r.push([]),r[r.length-1].push(e),r.length>=2&&r[r.length-2].push(e),console.log(r)})),chrome.history.search({text:"",startTime:e,maxResults:99},l),n("searchSubmit").onclick=function(){t.innerHTML=" ";let o=document.getElementById("searchInput").value;chrome.history.search({text:o,startTime:e},l)},n("deleteSelected").onclick=function(){let e=document.getElementsByTagName("input");for(var t=0;t<e.length;t++)1==e[t].checked&&chrome.history.deleteUrl({url:e[t].value});location.reload()},n("removeAll").onclick=function(){chrome.history.deleteAll((function(){location.reload()}))},n("seeAll").onclick=function(){location.reload()}})();